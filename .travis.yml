env:
  global:
    - CC_TEST_REPORTER_ID=3e113735ca4277f3ea59db80fbdca7bceb293775290baa2db1fdc216ba940228
language:
  - python
matrix:
  include:
  - python: "3.6"
    dist: xenial
  - python: "3.7"
    dist: xenial
    env:
      SPHINX_TARGET: "yes"
      TEST_REPORT_TARGET: "yes"
  - python: "3.8-dev"
    dist: xenial
install:
  - pip install pipenv
  - make init
before_script:
  - curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
  - chmod +x ./cc-test-reporter
script:
  - make test
  - '[ $TEST_REPORT_TARGET ] && ./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT || echo "Skip send test report"'
  - '[ $SPHINX_TARGET ] && (make doctest) || echo "Skip doctest"'
notifications:
  slack:
    secure: f1gaoNHCh8SuDTVpik5QR06v6l5BSoabwnN5lfQDSoDaTtUT/TsjAYG7JMpjQsFQjLUGzDRj9wY11qinYHfdicdKFjRHz4k0Ua6G7P97W5ITfcue5Z51fz0z/dadrbfv9Qfi0mKLLoP2SjU5W4uEvsWTWhfpdIXDEch59rKAAP3/46SNDy46exmwLjg9NVhCyHDceBb/40VREPxJP1I1haxU4RycQDRihC8l14V4uxiUz+FIp1lv/Jr5RImnt+QgPkXId+nLo2N8Kch6wM55eM9ZP3ttKM2TJCq3WgRX7j3jd3wpEZVCsPl7DlK6r6Og9T79MiRno/xIPqbS+pdnvIhazmQOTgF1hvkLtnWEVxVIzqdibQM+WHMRmSytXunBu6sMZ0Tme+HC01ouidnRxlagcMW4ZQHejQUeMdZ2uv3XeA92mERfwv+c1CwyNmDmIOqSy/Aqfwmqz00o22HmqvCgi0olHXp0eI1dyTANNo2D744AXJCMFCMP9I+35/v3/rzSzzA3XProgvkU9U8xjkmUgBaJuX9zP3JnhaLNI2C6dZobSTJRNhrlidqEAZwxfSaOEtPkTsc97IjNmXmHw6X8FywQRWzNRqeTJDSx47gE6Nb4aMWu3f2cIM1e290HiaByo3ceWeMs6zQQHt1YT/xs9dCnkmCa21qdd1JQowg=

